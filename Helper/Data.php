<?php eval(base64_decode("LyoqICogR29NYWdlLmNvbSAqICogR29NYWdlIEZlZWQgUHJvIE0yICogKiBAY2F0ZWdvcnkgRXh0ZW5zaW9uICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTAtMjAxOCBHb01hZ2UuY29tIChodHRwczovL3d3dy5nb21hZ2UuY29tKSAqIEBhdXRob3IgR29NYWdlLmNvbSAqIEBsaWNlbnNlIGh0dHBzOi8vd3d3LmdvbWFnZS5jb20vbGljZW5zaW5nIFNpbmdsZSBkb21haW4gbGljZW5zZSAqIEB0ZXJtcyBvZiB1c2UgaHR0cHM6Ly93d3cuZ29tYWdlLmNvbS90ZXJtcy1vZi11c2UgKiBAdmVyc2lvbiBSZWxlYXNlOiAxLjEuMCAqIEBzaW5jZSBDbGFzcyBhdmFpbGFibGUgc2luY2UgUmVsZWFzZSAxLjAuMCAqLyBuYW1lc3BhY2UgR29NYWdlXEZlZWRcSGVscGVyOyB1c2UgTWFnZW50b1xGcmFtZXdvcmtcQXBwXEZpbGVzeXN0ZW1cRGlyZWN0b3J5TGlzdDsgY2xhc3MgRGF0YSB7IC8qKiAqIEB2YXIgXE1hZ2VudG9cQ2F0YWxvZ1xNb2RlbFxSZXNvdXJjZU1vZGVsXFByb2R1Y3RcQXR0cmlidXRlXENvbGxlY3Rpb25GYWN0b3J5ICovIHByb3RlY3RlZCAkX2F0dHJpYnV0ZUNvbGxlY3Rpb25GYWN0b3J5OyAvKiogKiBAdmFyIFxHb01hZ2VcRmVlZFxNb2RlbFxSZXNvdXJjZU1vZGVsXEF0dHJpYnV0ZVxDb2xsZWN0aW9uICovIHByb3RlY3RlZCAkX2R5bmFtaWNBdHRyaWJ1dGVDb2xsZWN0aW9uOyAvKiogKiBAdmFyIFxNYWdlbnRvXFN0b3JlXE1vZGVsXFN0b3JlTWFuYWdlckludGVyZmFjZSAqLyBwcm90ZWN0ZWQgJF9zdG9yZU1hbmFnZXI7IC8qKiAqIEB2YXIgXE1hZ2VudG9cU3RvcmVcTW9kZWxcU3lzdGVtXFN0b3JlICovIHByb3RlY3RlZCAkX3N5c3RlbVN0b3JlOyAvKiogKiBAdmFyIFxNYWdlbnRvXEZyYW1ld29ya1xGaWxlc3lzdGVtXERpcmVjdG9yeVxSZWFkSW50ZXJmYWNlICovIHByb3RlY3RlZCAkX2RpcmVjdG9yeTsgLyoqICogQHZhciBcTWFnZW50b1xGcmFtZXdvcmtcU3RkbGliXERhdGVUaW1lXERhdGVUaW1lICovIHByb3RlY3RlZCAkX2RhdGVUaW1lOyAvKiogKiBAdmFyIFxNYWdlbnRvXEZyYW1ld29ya1xNb2R1bGVcTW9kdWxlTGlzdEludGVyZmFjZSAqLyBwcm90ZWN0ZWQgJF9tb2R1bGVMaXN0OyAvKiogKiBAdmFyIFxNYWdlbnRvXEZyYW1ld29ya1xKc29uXEhlbHBlclxEYXRhICovIHByb3RlY3RlZCAkX2pzb25IZWxwZXI7IC8qKiAqIEB2YXIgXE1hZ2VudG9cRnJhbWV3b3JrXEVuY3J5cHRpb25cRW5jcnlwdG9ySW50ZXJmYWNlICovIHByb3RlY3RlZCAkX2VuY3J5cHRvcjsgLyoqICogQHZhciBcR29NYWdlXEZlZWRcTW9kZWxcTWFwcGVyXEZhY3RvcnkgKi8gcHJvdGVjdGVkICRfbWFwcGVyRmFjdG9yeTsgLyoqICogQHZhciBcTWFnZW50b1xGcmFtZXdvcmtcT2JqZWN0TWFuYWdlckludGVyZmFjZSAqLyBwcm90ZWN0ZWQgJF9vYmplY3RNYW5hZ2VyOyAvKiogKiBAdmFyIFxNYWdlbnRvXEZyYW1ld29ya1xBcHBcQ29uZmlnXFNjb3BlQ29uZmlnSW50ZXJmYWNlICovIHByb3RlY3RlZCAkX3Njb3BlQ29uZmlnOyBwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoIFxNYWdlbnRvXEZyYW1ld29ya1xPYmplY3RNYW5hZ2VySW50ZXJmYWNlICRvYmplY3RNYW5hZ2VyICkgeyAkdGhpcy0+X29iamVjdE1hbmFnZXIgPSAkb2JqZWN0TWFuYWdlcjsgJHRoaXMtPl9hdHRyaWJ1dGVDb2xsZWN0aW9uRmFjdG9yeSA9ICRvYmplY3RNYW5hZ2VyLT5nZXQoJ01hZ2VudG9cQ2F0YWxvZ1xNb2RlbFxSZXNvdXJjZU1vZGVsXFByb2R1Y3RcQXR0cmlidXRlXENvbGxlY3Rpb25GYWN0b3J5Jyk7ICR0aGlzLT5fZHluYW1pY0F0dHJpYnV0ZUNvbGxlY3Rpb24gPSAkb2JqZWN0TWFuYWdlci0+Z2V0KCdHb01hZ2VcRmVlZFxNb2RlbFxSZXNvdXJjZU1vZGVsXEF0dHJpYnV0ZVxDb2xsZWN0aW9uJyk7ICRmaWxlc3lzdGVtID0gJG9iamVjdE1hbmFnZXItPmdldCgnTWFnZW50b1xGcmFtZXdvcmtcRmlsZXN5c3RlbScpOyAkdGhpcy0+X2RpcmVjdG9yeSA9ICRmaWxlc3lzdGVtLT5nZXREaXJlY3RvcnlSZWFkKERpcmVjdG9yeUxpc3Q6Ok1FRElBKTsgJHRoaXMtPl9zdG9yZU1hbmFnZXIgPSAkb2JqZWN0TWFuYWdlci0+Z2V0KCdNYWdlbnRvXFN0b3JlXE1vZGVsXFN0b3JlTWFuYWdlcicpOyAkdGhpcy0+X3N5c3RlbVN0b3JlID0gJG9iamVjdE1hbmFnZXItPmdldCgnTWFnZW50b1xTdG9yZVxNb2RlbFxTeXN0ZW1cU3RvcmUnKTsgJHRoaXMtPl9kYXRlVGltZSA9ICRvYmplY3RNYW5hZ2VyLT5nZXQoJ01hZ2VudG9cRnJhbWV3b3JrXFN0ZGxpYlxEYXRlVGltZVxEYXRlVGltZScpOyAkdGhpcy0+X21vZHVsZUxpc3QgPSAkb2JqZWN0TWFuYWdlci0+Z2V0KCdNYWdlbnRvXEZyYW1ld29ya1xNb2R1bGVcTW9kdWxlTGlzdCcpOyAkdGhpcy0+X2pzb25IZWxwZXIgPSAkb2JqZWN0TWFuYWdlci0+Z2V0KCdNYWdlbnRvXEZyYW1ld29ya1xKc29uXEhlbHBlclxEYXRhJyk7ICR0aGlzLT5fZW5jcnlwdG9yID0gJG9iamVjdE1hbmFnZXItPmdldCgnTWFnZW50b1xGcmFtZXdvcmtcRW5jcnlwdGlvblxFbmNyeXB0b3InKTsgJHRoaXMtPl9tYXBwZXJGYWN0b3J5ID0gJG9iamVjdE1hbmFnZXItPmdldCgnR29NYWdlXEZlZWRcTW9kZWxcTWFwcGVyXEZhY3RvcnknKTsgJHRoaXMtPl9zY29wZUNvbmZpZyA9ICRvYmplY3RNYW5hZ2VyLT5nZXQoJ01hZ2VudG9cRnJhbWV3b3JrXEFwcFxDb25maWcnKTsgfSAvKiogKiBAcmV0dXJuIGFycmF5ICovIHB1YmxpYyBmdW5jdGlvbiBnZXRQcm9kdWN0QXR0cmlidXRlcygpIHsgJGF0dHJpYnV0ZXMgPSAkdGhpcy0+X2F0dHJpYnV0ZUNvbGxlY3Rpb25GYWN0b3J5LT5jcmVhdGUoKS0+YWRkVmlzaWJsZUZpbHRlcigpLT5nZXRJdGVtcygpOyAkY3VzdG9tTWFwcGVycyA9ICR0aGlzLT5fbWFwcGVyRmFjdG9yeS0+Z2V0Q3VzdG9tTWFwcGVycygpOyBmb3JlYWNoICgkYXR0cmlidXRlcyBhcyAka2V5ID0+ICRhdHRyaWJ1dGUpIHsgaWYgKGlzc2V0KCRjdXN0b21NYXBwZXJzWyRhdHRyaWJ1dGUtPmdldEF0dHJpYnV0ZUNvZGUoKV0pKSB7IHVuc2V0KCRhdHRyaWJ1dGVzWyRrZXldKTsgfSB9ICRhdHRyaWJ1dGVzID0gYXJyYXlfbWFwKGZ1bmN0aW9uICgkYXR0cmlidXRlKSB7IHJldHVybiBbICd2YWx1ZScgPT4gJGF0dHJpYnV0ZS0+Z2V0QXR0cmlidXRlQ29kZSgpLCAnbGFiZWwnID0+ICRhdHRyaWJ1dGUtPmdldFN0b3JlTGFiZWwoKSBdOyB9LCAkYXR0cmlidXRlcyApOyBmb3JlYWNoICgkY3VzdG9tTWFwcGVycyBhcyAkdmFsdWUgPT4gJGNsYXNzKSB7ICRhdHRyaWJ1dGVzW10gPSBbICd2YWx1ZScgPT4gJHZhbHVlLCAnbGFiZWwnID0+ICRjbGFzczo6Z2V0TGFiZWwoKSBdOyB9IHVzb3J0KCRhdHRyaWJ1dGVzLCBmdW5jdGlvbiAoJGEsICRiKSB7IHJldHVybiBzdHJjbXAoJGFbJ2xhYmVsJ10sICRiWydsYWJlbCddKTsgfSApOyByZXR1cm4gJGF0dHJpYnV0ZXM7IH0gLyoqICogQHJldHVybiBhcnJheSAqLyBwdWJsaWMgZnVuY3Rpb24gZ2V0RHluYW1pY0F0dHJpYnV0ZXMoKSB7ICRhdHRyaWJ1dGVzID0gJHRoaXMtPl9keW5hbWljQXR0cmlidXRlQ29sbGVjdGlvbi0+bG9hZCgpLT5nZXRJdGVtcygpOyAkYXR0cmlidXRlcyA9IGFycmF5X21hcChmdW5jdGlvbiAoXEdvTWFnZVxGZWVkXE1vZGVsXEF0dHJpYnV0ZSAkYXR0cmlidXRlKSB7IHJldHVybiBbICd2YWx1ZScgPT4gJGF0dHJpYnV0ZS0+Z2V0Q29kZSgpLCAnbGFiZWwnID0+ICRhdHRyaWJ1dGUtPmdldE5hbWUoKSBdOyB9LCAkYXR0cmlidXRlcyApOyB1c29ydCgkYXR0cmlidXRlcywgZnVuY3Rpb24gKCRhLCAkYikgeyByZXR1cm4gc3RyY21wKCRhWydsYWJlbCddLCAkYlsnbGFiZWwnXSk7IH0gKTsgcmV0dXJuICRhdHRyaWJ1dGVzOyB9IC8qKiAqIEBwYXJhbSBzdHJpbmcgJGZpbGVOYW1lICogQHBhcmFtIGludCAkc3RvcmVJZCAqIEByZXR1cm4gc3RyaW5nICovIHB1YmxpYyBmdW5jdGlvbiBnZXRGZWVkVXJsKCRmaWxlTmFtZSA9ICcnLCAkc3RvcmVJZCA9IDApIHsgaWYgKCRmaWxlTmFtZSAmJiAkc3RvcmVJZCkgeyAkcGF0aCA9ICR0aGlzLT5nZXRGZWVkUGF0aCgkZmlsZU5hbWUpOyBpZiAoJHBhdGgpIHsgcmV0dXJuICR0aGlzLT5fc3RvcmVNYW5hZ2VyLT5nZXRTdG9yZSgkc3RvcmVJZCktPmdldEJhc2VVcmwoIFxNYWdlbnRvXEZyYW1ld29ya1xVcmxJbnRlcmZhY2U6OlVSTF9UWVBFX01FRElBICkgLiAkcGF0aDsgfSB9IHJldHVybiAnJzsgfSAvKiogKiBAcGFyYW0gc3RyaW5nICRmaWxlTmFtZSAqIEByZXR1cm4gc3RyaW5nICovIHB1YmxpYyBmdW5jdGlvbiBnZXRGZWVkUGF0aCgkZmlsZU5hbWUsICRhYnNvbHV0ZSA9IGZhbHNlKSB7ICRwYXRoID0gXEdvTWFnZVxGZWVkXE1vZGVsXFdyaXRlclxXcml0ZXJJbnRlcmZhY2U6OkRJUkVDVE9SWSAuICcvJyAuICRmaWxlTmFtZTsgaWYgKCR0aGlzLT5fZGlyZWN0b3J5LT5pc0V4aXN0KCRwYXRoKSkgeyByZXR1cm4gJGFic29sdXRlID8gJHRoaXMtPl9kaXJlY3RvcnktPmdldEFic29sdXRlUGF0aCgkcGF0aCkgOiAkcGF0aDsgfSByZXR1cm4gJyc7IH0gLyoqICogQHBhcmFtIGludCAkaW50ZXJ2YWwgKiBAcGFyYW0gaW50ICRob3VyRnJvbSAqIEBwYXJhbSBpbnQgJGhvdXJUbyAqIEBwYXJhbSBzdHJpbmcgJGxhc3RSdW4gKiBAcmV0dXJuIGJvb2wgKi8gcHVibGljIGZ1bmN0aW9uIG5lZWRSdW5Dcm9uKCRpbnRlcnZhbCwgJGhvdXJGcm9tLCAkaG91clRvLCAkbGFzdFJ1bikgeyAkY3VycmVudCA9ICR0aGlzLT5fZGF0ZVRpbWUtPmdtdERhdGUoJ0cnKTsgJGxhc3RSdW4gPSAkbGFzdFJ1biA/ICR0aGlzLT5fZGF0ZVRpbWUtPmdtdFRpbWVzdGFtcCgkbGFzdFJ1bikgOiAwOyBzd2l0Y2ggKCRpbnRlcnZhbCkgeyBjYXNlIDEyOiBjYXNlIDI0OiBpZiAoJGhvdXJGcm9tICE9ICRjdXJyZW50KSB7IHJldHVybiBmYWxzZTsgfSBpZiAoKCRsYXN0UnVuICsgJGludGVydmFsICogNjAgKiA2MCkgPiAkdGhpcy0+X2RhdGVUaW1lLT5nbXRUaW1lc3RhbXAoKSkgeyByZXR1cm4gZmFsc2U7IH0gYnJlYWs7IGRlZmF1bHQ6IGlmICghJGhvdXJUbykgeyAkaG91clRvID0gMjQ7IH0gJGhvdXJzID0gW107IGlmICgkaG91ckZyb20gPiAkaG91clRvKSB7IGZvciAoJGkgPSAkaG91ckZyb207ICRpIDw9IDIzOyAkaSsrKSB7ICRob3Vyc1tdID0gJGk7IH0gZm9yICgkaSA9IDA7ICRpIDw9ICRob3VyVG87ICRpKyspIHsgJGhvdXJzW10gPSAkaTsgfSB9IGVsc2UgeyBmb3IgKCRpID0gJGhvdXJGcm9tOyAkaSA8PSAkaG91clRvOyAkaSsrKSB7IGlmICgkaSA9PSAyNCkgeyAkaG91cnNbXSA9IDA7IH0gZWxzZSB7ICRob3Vyc1tdID0gJGk7IH0gfSB9IGlmICghaW5fYXJyYXkoJGN1cnJlbnQsICRob3VycykpIHsgcmV0dXJuIGZhbHNlOyB9IGlmICgoJGxhc3RSdW4gKyAkaW50ZXJ2YWwgKiA2MCAqIDYwKSA+ICR0aGlzLT5fZGF0ZVRpbWUtPmdtdFRpbWVzdGFtcCgpKSB7IHJldHVybiBmYWxzZTsgfSB9IHJldHVybiB0cnVlOyB9IC8qKiAqIEByZXR1cm4gYXJyYXkgKi8gcHVibGljIGZ1bmN0aW9uIGdldEF2YWlsYWJsZVdlYnNpdGVzKCkgeyBpZiAoISR0aGlzLT5fc2NvcGVDb25maWctPmdldFZhbHVlKCdnb21hZ2VfYWN0aXZhdGlvbi9mZWVkL2luc3RhbGxlZCcpIHx8IChpbnR2YWwoJHRoaXMtPl9zY29wZUNvbmZpZy0+Z2V0VmFsdWUoJ2dvbWFnZV9hY3RpdmF0aW9uL2ZlZWQvY291bnQnKSkgPiAxMCkgKSB7IHJldHVybiBbXTsgfSAkdGltZV90b191cGRhdGUgPSA2MCAqIDYwICogMjQgKiAxNTsgJHIgPSAkdGhpcy0+X3Njb3BlQ29uZmlnLT5nZXRWYWx1ZSgnZ29tYWdlX2FjdGl2YXRpb24vZmVlZC9hcicpOyAkdCA9ICR0aGlzLT5fc2NvcGVDb25maWctPmdldFZhbHVlKCdnb21hZ2VfYWN0aXZhdGlvbi9mZWVkL3RpbWUnKTsgJHMgPSAkdGhpcy0+X3Njb3BlQ29uZmlnLT5nZXRWYWx1ZSgnZ29tYWdlX2FjdGl2YXRpb24vZmVlZC93ZWJzaXRlcycpOyAkbGFzdF9jaGVjayA9IHN0cl9yZXBsYWNlKCRyLCAnJywgJHRoaXMtPl9lbmNyeXB0b3ItPmRlY3J5cHQoJHQpKTsgJHNpdGVzID0gZXhwbG9kZSgnLCcsIHN0cl9yZXBsYWNlKCRyLCAnJywgJHRoaXMtPl9lbmNyeXB0b3ItPmRlY3J5cHQoJHMpKSk7ICRzaXRlcyA9IGFycmF5X2RpZmYoJHNpdGVzLCBbJyddKTsgaWYgKCgkbGFzdF9jaGVjayArICR0aW1lX3RvX3VwZGF0ZSkgPCAkdGhpcy0+X2RhdGVUaW1lLT5nbXRUaW1lc3RhbXAoKSkgeyAkdGhpcy0+YSgoaW50KSR0aGlzLT5fc2NvcGVDb25maWctPmdldFZhbHVlKCdnb21hZ2VfYWN0aXZhdGlvbi9mZWVkL2NvdW50JyksIGltcGxvZGUoJywnLCAkc2l0ZXMpICk7IH0gcmV0dXJuICRzaXRlczsgfSBwdWJsaWMgZnVuY3Rpb24gYSgkYyA9IDAsICRzID0gJycpIHsgJGsgPSAkdGhpcy0+X3Njb3BlQ29uZmlnLT5nZXRWYWx1ZSgnZ29tYWdlX3NldHRpbmdzL2ZlZWQva2V5Jyk7IC8qKiBAdmFyIFxNYWdlbnRvXENvbmZpZ1xNb2RlbFxDb25maWcgJGNvbmZpZyAqLyAkY29uZmlnID0gJHRoaXMtPl9vYmplY3RNYW5hZ2VyLT5jcmVhdGUoJ01hZ2VudG9cQ29uZmlnXE1vZGVsXENvbmZpZycpOyAkY2ggPSBjdXJsX2luaXQoKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1VSTCwgc3ByaW50ZignaHR0cHM6Ly93d3cuZ29tYWdlLmNvbS9pbmRleC5waHAvZ29tYWdlX2Rvd25sb2FkYWJsZS9rZXkvY2hlY2snKSk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9QT1NULCB0cnVlKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1BPU1RGSUVMRFMsICdrZXk9JyAuIHVybGVuY29kZSgkaykgLiAnJnNrdT1mZWVkLXByby1tMiZkb21haW5zPScgLiB1cmxlbmNvZGUoaW1wbG9kZSgnLCcsICR0aGlzLT5fZ2V0RG9tYWlucygpKSkgLiAnJnZlcj0nIC4gdXJsZW5jb2RlKCR0aGlzLT5fZ2V0VmVyc2lvbigpKSk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9USU1FT1VULCAzMCk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9SRVRVUk5UUkFOU0ZFUiwgdHJ1ZSk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9TU0xfVkVSSUZZUEVFUiwgMCk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9TU0xfVkVSSUZZSE9TVCwgMCk7ICRjb250ZW50ID0gY3VybF9leGVjKCRjaCk7IHRyeSB7ICRyID0gJHRoaXMtPl9qc29uSGVscGVyLT5qc29uRGVjb2RlKCRjb250ZW50KTsgfSBjYXRjaCAoXEV4Y2VwdGlvbiAkZSkgeyAkciA9IFtdOyB9IGlmIChlbXB0eSgkcikpIHsgJHZhbHVlMSA9ICR0aGlzLT5fc2NvcGVDb25maWctPmdldFZhbHVlKCdnb21hZ2VfYWN0aXZhdGlvbi9mZWVkL2FyJyk7ICRncm91cHMgPSBbICdmZWVkJyA9PiBbICdmaWVsZHMnID0+IFsgJ2FyJyA9PiBbJ3ZhbHVlJyA9PiAkdmFsdWUxXSwgJ3dlYnNpdGVzJyA9PiBbICd2YWx1ZScgPT4gKHN0cmluZykkdGhpcy0+X3Njb3BlQ29uZmlnLT5nZXRWYWx1ZSgnZ29tYWdlX2FjdGl2YXRpb24vZmVlZC93ZWJzaXRlcycpIF0sICd0aW1lJyA9PiBbICd2YWx1ZScgPT4gKHN0cmluZykkdGhpcy0+X2VuY3J5cHRvci0+ZW5jcnlwdCgkdmFsdWUxIC4gKCR0aGlzLT5fZGF0ZVRpbWUtPmdtdFRpbWVzdGFtcCgpIC0gKDYwICogNjAgKiAyNCAqIDE1IC0gMTgwMCkpIC4gJHZhbHVlMSkgXSwgJ2NvdW50JyA9PiBbJ3ZhbHVlJyA9PiAkYyArIDFdIF0gXSBdOyAkY29uZmlnLT5zZXRTZWN0aW9uKCdnb21hZ2VfYWN0aXZhdGlvbicpIC0+c2V0R3JvdXBzKCRncm91cHMpIC0+c2F2ZSgpOyByZXR1cm47IH0gJHZhbHVlMSA9ICcnOyAkdmFsdWUyID0gJyc7IGlmIChpc3NldCgkclsnZCddKSAmJiBpc3NldCgkclsnYyddKSkgeyAkdmFsdWUxID0gJHRoaXMtPl9lbmNyeXB0b3ItPmVuY3J5cHQoYmFzZTY0X2VuY29kZSgkdGhpcy0+X2pzb25IZWxwZXItPmpzb25FbmNvZGUoJHIpKSk7IGlmICghJHMpIHsgJHMgPSAkdGhpcy0+X3Njb3BlQ29uZmlnLT5nZXRWYWx1ZSgnZ29tYWdlX3NldHRpbmdzL2ZlZWQvd2Vic2l0ZXMnKTsgfSAkcyA9IGFycmF5X3NsaWNlKGV4cGxvZGUoJywnLCAkcyksIDAsICRyWydjJ10pOyAkdmFsdWUyID0gJHRoaXMtPl9lbmNyeXB0b3ItPmVuY3J5cHQoJHZhbHVlMSAuIGltcGxvZGUoJywnLCAkcykgLiAkdmFsdWUxKTsgfSAkZ3JvdXBzID0gWyAnZmVlZCcgPT4gWyAnZmllbGRzJyA9PiBbICdhcicgPT4gWyd2YWx1ZScgPT4gJHZhbHVlMV0sICd3ZWJzaXRlcycgPT4gWyd2YWx1ZScgPT4gKHN0cmluZykkdmFsdWUyXSwgJ3RpbWUnID0+IFsgJ3ZhbHVlJyA9PiAoc3RyaW5nKSR0aGlzLT5fZW5jcnlwdG9yLT5lbmNyeXB0KCR2YWx1ZTEgLiAkdGhpcy0+X2RhdGVUaW1lLT5nbXRUaW1lc3RhbXAoKSAuICR2YWx1ZTEpIF0sICdpbnN0YWxsZWQnID0+IFsndmFsdWUnID0+IDFdLCAnY291bnQnID0+IFsndmFsdWUnID0+IDBdIF0gXSBdOyAkY29uZmlnLT5zZXRTZWN0aW9uKCdnb21hZ2VfYWN0aXZhdGlvbicpIC0+c2V0R3JvdXBzKCRncm91cHMpIC0+c2F2ZSgpOyB9IC8qKiAqIEByZXR1cm4gbWl4ZWQgKi8gcHVibGljIGZ1bmN0aW9uIGdhKCkgeyAkdmFsdWUgPSBiYXNlNjRfZGVjb2RlKCR0aGlzLT5fZW5jcnlwdG9yLT5kZWNyeXB0KCR0aGlzLT5fc2NvcGVDb25maWctPmdldFZhbHVlKCdnb21hZ2VfYWN0aXZhdGlvbi9mZWVkL2FyJykpKTsgaWYgKCR2YWx1ZSkgeyByZXR1cm4gJHRoaXMtPl9qc29uSGVscGVyLT5qc29uRGVjb2RlKCR2YWx1ZSk7IH0gcmV0dXJuIFtdOyB9IC8qKiAqIEByZXR1cm4gYXJyYXkgKi8gcHJpdmF0ZSBmdW5jdGlvbiBfZ2V0RG9tYWlucygpIHsgJGRvbWFpbnMgPSBbXTsgLyoqIEB2YXIgXE1hZ2VudG9cU3RvcmVcTW9kZWxcV2Vic2l0ZSAkd2Vic2l0ZSAqLyBmb3JlYWNoICgkdGhpcy0+X3N0b3JlTWFuYWdlci0+Z2V0V2Vic2l0ZXMoKSBhcyAkd2Vic2l0ZSkgeyAkdXJsID0gJHdlYnNpdGUtPmdldENvbmZpZygnd2ViL3Vuc2VjdXJlL2Jhc2VfdXJsJyk7IGlmICgkZG9tYWluID0gdHJpbShwcmVnX3JlcGxhY2UoJy9eLio/XFwvXFwvKC4qKT9cXC8vJywgJyQxJywgJHVybCkpKSB7ICRkb21haW5zW10gPSAkZG9tYWluOyB9ICR1cmwgPSAkd2Vic2l0ZS0+Z2V0Q29uZmlnKCd3ZWIvc2VjdXJlL2Jhc2VfdXJsJyk7IGlmICgkZG9tYWluID0gdHJpbShwcmVnX3JlcGxhY2UoJy9eLio/XFwvXFwvKC4qKT9cXC8vJywgJyQxJywgJHVybCkpKSB7ICRkb21haW5zW10gPSAkZG9tYWluOyB9IH0gcmV0dXJuIGFycmF5X3VuaXF1ZSgkZG9tYWlucyk7IH0gLyoqICogQHJldHVybiBzdHJpbmcgKi8gcHJpdmF0ZSBmdW5jdGlvbiBfZ2V0VmVyc2lvbigpIHsgcmV0dXJuICR0aGlzLT5fbW9kdWxlTGlzdC0+Z2V0T25lKCdHb01hZ2VfRmVlZCcpWydzZXR1cF92ZXJzaW9uJ107IH0gLyoqICogQHJldHVybiBhcnJheSAqLyBwdWJsaWMgZnVuY3Rpb24gZ2V0U3RvcmVPcHRpb25BcnJheSgpIHsgJG9wdGlvbnMgPSBbXTsgJG9wdGlvbnNbXSA9IFsnbGFiZWwnID0+ICcnLCAndmFsdWUnID0+ICcnXTsgJHdlYnNpdGVzID0gJHRoaXMtPmdldEF2YWlsYWJsZVdlYnNpdGVzKCk7ICRub25Fc2NhcGFibGVOYnNwQ2hhciA9IGh0bWxfZW50aXR5X2RlY29kZSgnJiMxNjA7JywgRU5UX05PUVVPVEVTLCAnVVRGLTgnKTsgZm9yZWFjaCAoJHRoaXMtPl9zeXN0ZW1TdG9yZS0+Z2V0V2Vic2l0ZUNvbGxlY3Rpb24oKSBhcyAkd2Vic2l0ZSkgeyBpZiAoIWluX2FycmF5KCR3ZWJzaXRlLT5nZXRJZCgpLCAkd2Vic2l0ZXMpKSB7IGNvbnRpbnVlOyB9ICR3ZWJzaXRlU2hvdyA9IGZhbHNlOyBmb3JlYWNoICgkdGhpcy0+X3N5c3RlbVN0b3JlLT5nZXRHcm91cENvbGxlY3Rpb24oKSBhcyAkZ3JvdXApIHsgaWYgKCR3ZWJzaXRlLT5nZXRJZCgpICE9ICRncm91cC0+Z2V0V2Vic2l0ZUlkKCkpIHsgY29udGludWU7IH0gJGdyb3VwU2hvdyA9IGZhbHNlOyBmb3JlYWNoICgkdGhpcy0+X3N5c3RlbVN0b3JlLT5nZXRTdG9yZUNvbGxlY3Rpb24oKSBhcyAkc3RvcmUpIHsgaWYgKCRncm91cC0+Z2V0SWQoKSAhPSAkc3RvcmUtPmdldEdyb3VwSWQoKSkgeyBjb250aW51ZTsgfSBpZiAoISR3ZWJzaXRlU2hvdykgeyAkb3B0aW9uc1tdID0gWydsYWJlbCcgPT4gJHdlYnNpdGUtPmdldE5hbWUoKSwgJ3ZhbHVlJyA9PiBbXV07ICR3ZWJzaXRlU2hvdyA9IHRydWU7IH0gaWYgKCEkZ3JvdXBTaG93KSB7ICRncm91cFNob3cgPSB0cnVlOyAkdmFsdWVzID0gW107IH0gJHZhbHVlc1tdID0gWyAnbGFiZWwnID0+IHN0cl9yZXBlYXQoJG5vbkVzY2FwYWJsZU5ic3BDaGFyLCA0KSAuICRzdG9yZS0+Z2V0TmFtZSgpLCAndmFsdWUnID0+ICRzdG9yZS0+Z2V0SWQoKSwgXTsgfSBpZiAoJGdyb3VwU2hvdykgeyAkb3B0aW9uc1tdID0gWyAnbGFiZWwnID0+IHN0cl9yZXBlYXQoJG5vbkVzY2FwYWJsZU5ic3BDaGFyLCA0KSAuICRncm91cC0+Z2V0TmFtZSgpLCAndmFsdWUnID0+ICR2YWx1ZXMsIF07IH0gfSB9IHJldHVybiAkb3B0aW9uczsgfSBwdWJsaWMgZnVuY3Rpb24gbm90aWZ5KCkgeyAkZnJlcXVlbmN5ID0gKGludCkkdGhpcy0+X3Njb3BlQ29uZmlnLT5nZXRWYWx1ZSgnZ29tYWdlX25vdGlmaWNhdGlvbi9ub3RpZmljYXRpb24vZnJlcXVlbmN5Jyk7IGlmICghJGZyZXF1ZW5jeSkgeyAkZnJlcXVlbmN5ID0gMjQ7IH0gJGxhc3RfdXBkYXRlID0gKGludCkkdGhpcy0+X3Njb3BlQ29uZmlnLT5nZXRWYWx1ZSgnZ29tYWdlX25vdGlmaWNhdGlvbi9ub3RpZmljYXRpb24vbGFzdF91cGRhdGUnKTsgaWYgKCgkZnJlcXVlbmN5ICogNjAgKiA2MCArICRsYXN0X3VwZGF0ZSkgPiAkdGhpcy0+X2RhdGVUaW1lLT5nbXRUaW1lc3RhbXAoKSkgeyByZXR1cm4gZmFsc2U7IH0gJHRpbWVzdGFtcCA9ICRsYXN0X3VwZGF0ZTsgaWYgKCEkdGltZXN0YW1wKSB7ICR0aW1lc3RhbXAgPSAkdGhpcy0+X2RhdGVUaW1lLT5nbXRUaW1lc3RhbXAoKTsgfSB0cnkgeyAkY2ggPSBjdXJsX2luaXQoKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1VSTCwgc3ByaW50ZignaHR0cHM6Ly93d3cuZ29tYWdlLmNvbS9pbmRleC5waHAvZ29tYWdlX25vdGlmaWNhdGlvbi9pbmRleC9kYXRhJykpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVCwgdHJ1ZSk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9QT1NURklFTERTLCAnc2t1PWZlZWQtcHJvLW0yJnRpbWVzdGFtcD0nIC4gJHRpbWVzdGFtcCAuICcmdmVyPScgLiB1cmxlbmNvZGUoJHRoaXMtPl9nZXRWZXJzaW9uKCkpKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1RJTUVPVVQsIDMwKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1JFVFVSTlRSQU5TRkVSLCB0cnVlKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1NTTF9WRVJJRllQRUVSLCAwKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1NTTF9WRVJJRllIT1NULCAwKTsgJGNvbnRlbnQgPSBjdXJsX2V4ZWMoJGNoKTsgdHJ5IHsgJHJlc3VsdCA9ICR0aGlzLT5fanNvbkhlbHBlci0+anNvbkRlY29kZSgkY29udGVudCk7IH0gY2F0Y2ggKFxFeGNlcHRpb24gJGUpIHsgJHJlc3VsdCA9IGZhbHNlOyB9IGlmICgkcmVzdWx0ICYmIGlzc2V0KCRyZXN1bHRbJ2ZyZXF1ZW5jeSddKSAmJiAoJHJlc3VsdFsnZnJlcXVlbmN5J10gIT0gJGZyZXF1ZW5jeSkpIHsgJGZyZXF1ZW5jeSA9ICRyZXN1bHRbJ2ZyZXF1ZW5jeSddOyB9IGlmICgkcmVzdWx0ICYmIGlzc2V0KCRyZXN1bHRbJ2RhdGEnXSkpIHsgaWYgKCFlbXB0eSgkcmVzdWx0WydkYXRhJ10pKSB7IC8qKiBAdmFyIFxNYWdlbnRvXEFkbWluTm90aWZpY2F0aW9uXE1vZGVsXEluYm94ICRpbmJveCAqLyAkaW5ib3ggPSAkdGhpcy0+X29iamVjdE1hbmFnZXItPmNyZWF0ZSgnTWFnZW50b1xBZG1pbk5vdGlmaWNhdGlvblxNb2RlbFxJbmJveCcpOyAkaW5ib3gtPnBhcnNlKCRyZXN1bHRbJ2RhdGEnXSk7IH0gfSB9IGNhdGNoIChcRXhjZXB0aW9uICRlKSB7IH0gJGdyb3VwcyA9IFsgJ25vdGlmaWNhdGlvbicgPT4gWyAnZmllbGRzJyA9PiBbICdmcmVxdWVuY3knID0+IFsndmFsdWUnID0+ICRmcmVxdWVuY3ldLCAnbGFzdF91cGRhdGUnID0+IFsndmFsdWUnID0+ICR0aGlzLT5fZGF0ZVRpbWUtPmdtdFRpbWVzdGFtcCgpXSBdIF0gXTsgLyoqIEB2YXIgXE1hZ2VudG9cQ29uZmlnXE1vZGVsXENvbmZpZyAkY29uZmlnICovICRjb25maWcgPSAkdGhpcy0+X29iamVjdE1hbmFnZXItPmNyZWF0ZSgnTWFnZW50b1xDb25maWdcTW9kZWxcQ29uZmlnJyk7ICRjb25maWctPnNldFNlY3Rpb24oJ2dvbWFnZV9ub3RpZmljYXRpb24nKSAtPnNldEdyb3VwcygkZ3JvdXBzKSAtPnNhdmUoKTsgfSB9"));